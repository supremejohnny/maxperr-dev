(()=>{document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelector(".site-header"),i=o?.classList.contains("site-header--subpage");function a(){if(!o||i){o?.classList.remove("tablet-corner");return}let e=window.innerWidth;e>=768&&e<=1023?(o.classList.add("tablet-corner"),console.log("Tablet mode: Header moved to corner")):(o.classList.remove("tablet-corner"),console.log("Non-tablet mode: Header in normal position"))}i?o?.classList.remove("tablet-corner"):(a(),window.addEventListener("resize",a));let s=document.getElementById("mobile-menu-button"),l=document.getElementById("mobile-menu");s&&l&&(s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let u=s.getAttribute("aria-expanded")==="true";s.setAttribute("aria-expanded",!u),l.classList.toggle("show"),console.log("Mobile menu toggled:",!u)}),l.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",()=>{s.setAttribute("aria-expanded","false"),l.classList.remove("show")})}),document.addEventListener("click",e=>{!s.contains(e.target)&&!l.contains(e.target)&&(s.setAttribute("aria-expanded","false"),l.classList.remove("show"))})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",u=>{let d=e.getAttribute("href"),t=document.querySelector(d);t&&(u.preventDefault(),t.scrollIntoView({behavior:"smooth"}))})});let c=document.querySelectorAll(".nav-dropdown"),r=null,p=()=>typeof window<"u"&&("ontouchstart"in window||navigator&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0));c.forEach(e=>{let u=e.querySelector("[data-dropdown]"),d=e.querySelector(".dropdown-menu");!u||!d||(e.addEventListener("mouseenter",()=>{r&&r!==e&&r.classList.remove("is-active"),e.classList.add("is-active"),r=e}),e.addEventListener("mouseleave",()=>{e.classList.remove("is-active"),r===e&&(r=null)}),u.addEventListener("click",t=>{p()&&(t.preventDefault(),e.classList.contains("is-active")?(e.classList.remove("is-active"),r=null):(c.forEach(n=>{n!==e&&n.classList.remove("is-active")}),e.classList.add("is-active"),r=e))}),document.addEventListener("click",t=>{e.contains(t.target)||(e.classList.remove("is-active"),r===e&&(r=null))}))}),document.addEventListener("keydown",e=>{e.key==="Escape"&&r&&(r.classList.remove("is-active"),r=null)}),document.querySelectorAll("[data-accordion-group]").forEach(e=>{let u=Array.from(e.querySelectorAll("[data-accordion-item]"));u.forEach(d=>{let t=d.querySelector("[data-accordion-trigger]"),n=d.querySelector("[data-accordion-panel]");!t||!n||t.addEventListener("click",()=>{let v=t.getAttribute("aria-expanded")==="true";u.forEach(f=>{let m=f.querySelector("[data-accordion-trigger]"),g=f.querySelector("[data-accordion-panel]"),h=f.querySelector("[data-accordion-icon]");if(!m||!g)return;let b=f===d?!v:!1;m.setAttribute("aria-expanded",b?"true":"false"),b?g.removeAttribute("hidden"):g.setAttribute("hidden",""),f.classList.toggle("is-open",b),h&&h.classList.toggle("rotate-180",b)})})})})});try{document.querySelectorAll(".hero-section").forEach(i=>{if(!(i instanceof Element))return;let a=[];try{a=JSON.parse(i.getAttribute("data-hero-images")||"[]")}catch{a=[]}if(!Array.isArray(a)||a.length===0)return;let s=i.querySelector(".hero-pagination"),l=i.querySelector(".hero-nav--prev"),c=i.querySelector(".hero-nav--next"),r=i.querySelector('.hero-bg-layer[data-layer="a"]'),p=i.querySelector('.hero-bg-layer[data-layer="b"]'),y=0,e=!0,u=(m,g=!1)=>{let h=a[m];if(!h)return;let b=e?r:p,L=e?p:r;L&&L.classList.remove("is-active"),b&&(b.style.backgroundImage=`url('${h}')`,g?b.classList.add("is-active"):requestAnimationFrame(()=>b.classList.add("is-active"))),e=!e,s&&s.querySelectorAll(".hero-dot").forEach((E,S)=>{E.classList.toggle("hero-dot--active",S===m)})},d=m=>{y=(m+a.length)%a.length,u(y)};s&&(s.innerHTML="",a.forEach((m,g)=>{let h=document.createElement("button");h.className="hero-dot"+(g===0?" hero-dot--active":""),h.type="button",h.setAttribute("aria-label",`Go to slide ${g+1}`),h.addEventListener("click",()=>d(g)),s.appendChild(h)})),u(0,!0),l instanceof Element&&l.addEventListener("click",()=>d(y-1)),c instanceof Element&&c.addEventListener("click",()=>d(y+1));let t=(m,g,h)=>m&&typeof m.addEventListener=="function"&&m.addEventListener(g,h),n=setInterval(()=>d(y+1),6e3),v=()=>{n&&(clearInterval(n),n=null)},f=()=>{n||(n=setInterval(()=>d(y+1),6e3))};t(i,"mouseenter",v),t(i,"mouseleave",f),t(document,"visibilitychange",()=>document.hidden?v():f())})}catch(o){console.error("[hero] init failed:",o)}document.addEventListener("DOMContentLoaded",()=>{try{let o=document.querySelector("[data-testimony]");if(!o)return;let i=o.querySelector('[data-role="front"]'),a=o.querySelector('[data-role="back"]'),s=o.querySelector("[data-next], .testimony-next")||document.querySelector("[data-next], .testimony-next"),l=o.querySelector("[data-testimony-source]"),c=[];if(l){try{let t=JSON.parse(l.textContent||"[]");Array.isArray(t)&&(c=t.map(n=>({heading:typeof n?.title=="string"?n.title:"",body:typeof n?.body=="string"?n.body:"",author:typeof n?.author=="string"?n.author:""})).filter(n=>n.heading||n.body||n.author))}catch(t){console.error("[testimony] failed to parse data:",t)}typeof l.remove=="function"&&l.remove()}if(!c.length)return;let r=0,p=!1,y=t=>{if(!t)return"";let n=String(t).split("/"),v=(n.shift()||"").trim(),f=n.join("/").trim();return f?`${v} <span style="color:#94A3B8;font-weight:700;">/ ${f}</span>`:v},e=(t,n)=>{let v=t.querySelector(".testimony-heading"),f=t.querySelector(".testimony-body"),m=t.querySelector(".testimony-author");v&&(v.textContent=n.heading||""),f&&(f.textContent=n.body||""),m&&(m.innerHTML=y(n.author))};e(i,c[r]),e(a,c[(r+1)%c.length]),s&&i!==s.parentElement&&i.prepend(s);let u=()=>{if(p)return;p=!0,o.classList.add("is-animating"),a.classList.remove("is-back"),a.classList.add("is-front"),i.classList.remove("is-front"),i.classList.add("is-back");let t=n=>{if(n&&n.propertyName!=="transform")return;a.removeEventListener("transitionend",t);let v=i;i=a,a=v,r=(r+1)%c.length,e(a,c[(r+1)%c.length]),s&&i!==s.parentElement&&i.prepend(s),p=!1,o.classList.remove("is-animating")};a.addEventListener("transitionend",t)},d=c.length>1;s&&typeof s.addEventListener=="function"&&(d?s.addEventListener("click",u):s.setAttribute("disabled","true")),d&&o.addEventListener("click",t=>{(t.target&&typeof t.target.closest=="function"?t.target.closest("[data-next], .testimony-next"):null)&&u()})}catch(o){console.error("[testimony] init failed:",o)}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",i=>{let a=o.getAttribute("href"),s=document.querySelector(a);s&&(i.preventDefault(),s.scrollIntoView({behavior:"smooth"}))})})});document.addEventListener("DOMContentLoaded",()=>{try{let o=document.querySelector("#news[data-news-slider]");if(!o)return;let i=o.querySelector(".news-viewport"),a=o.querySelector(".news-track"),s=Array.from(a.querySelectorAll(".news-card")),l=o.querySelector(".news-prev"),c=o.querySelector(".news-next");if(s.length===0){l&&l.setAttribute("disabled","true"),c&&c.setAttribute("disabled","true");return}let r=0,p=0,y=0,e=f=>parseFloat(String(f).replace("px",""))||0,u=()=>{let f=getComputedStyle(i),m=Math.max(1,parseInt(f.getPropertyValue("--cards-per-view"))||3),g=e(f.getPropertyValue("--gap"));p=(i.getBoundingClientRect().width-(m-1)*g)/m+g,y=Math.max(0,s.length-m),r=Math.min(r,y),d(),t()},d=()=>{a.style.setProperty("--news-offset",`${-(r*p)}px`)},t=()=>{l&&(r<=0?l.setAttribute("disabled","true"):l.removeAttribute("disabled")),c&&(r>=y?c.setAttribute("disabled","true"):c.removeAttribute("disabled"))},n=()=>{r>0&&(r--,d(),t())},v=()=>{r<y&&(r++,d(),t())};l&&l.addEventListener("click",n),c&&c.addEventListener("click",v),window.addEventListener("resize",u),u()}catch(o){console.error("[news slider] init failed:",o)}});})();
