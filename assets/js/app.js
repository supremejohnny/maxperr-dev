(()=>{document.addEventListener("DOMContentLoaded",()=>{let s=document.querySelector(".site-header");function i(){if(s){let e=window.innerWidth;e>=768&&e<=1023?(s.classList.add("tablet-corner"),console.log("Tablet mode: Header moved to corner")):(s.classList.remove("tablet-corner"),console.log("Non-tablet mode: Header in normal position"))}}i(),window.addEventListener("resize",i);let n=document.getElementById("mobile-menu-button"),r=document.getElementById("mobile-menu");n&&r&&(n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let a=n.getAttribute("aria-expanded")==="true";n.setAttribute("aria-expanded",!a),r.classList.toggle("show"),console.log("Mobile menu toggled:",!a)}),r.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",()=>{n.setAttribute("aria-expanded","false"),r.classList.remove("show")})}),document.addEventListener("click",e=>{!n.contains(e.target)&&!r.contains(e.target)&&(n.setAttribute("aria-expanded","false"),r.classList.remove("show"))})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",a=>{let y=e.getAttribute("href"),c=document.querySelector(y);c&&(a.preventDefault(),c.scrollIntoView({behavior:"smooth"}))})}),document.querySelectorAll("[data-accordion-group]").forEach(e=>{let a=Array.from(e.querySelectorAll("[data-accordion-item]"));a.forEach(y=>{let c=y.querySelector("[data-accordion-trigger]"),g=y.querySelector("[data-accordion-panel]");!c||!g||c.addEventListener("click",()=>{let h=c.getAttribute("aria-expanded")==="true";a.forEach(l=>{let o=l.querySelector("[data-accordion-trigger]"),t=l.querySelector("[data-accordion-panel]"),m=l.querySelector("[data-accordion-icon]");if(!o||!t)return;let d=l===y?!h:!1;o.setAttribute("aria-expanded",d?"true":"false"),d?t.removeAttribute("hidden"):t.setAttribute("hidden",""),l.classList.toggle("is-open",d),m&&m.classList.toggle("rotate-180",d)})})})})});try{document.querySelectorAll(".hero-section").forEach(i=>{if(!(i instanceof Element))return;let n=[];try{n=JSON.parse(i.getAttribute("data-hero-images")||"[]")}catch{n=[]}if(!Array.isArray(n)||n.length===0)return;let r=i.querySelector(".hero-pagination"),u=i.querySelector(".hero-nav--prev"),e=i.querySelector(".hero-nav--next"),a=i.querySelector('.hero-bg-layer[data-layer="a"]'),y=i.querySelector('.hero-bg-layer[data-layer="b"]'),c=0,g=!0,h=(f,v=!1)=>{let p=n[f];if(!p)return;let b=g?a:y,L=g?y:a;L&&L.classList.remove("is-active"),b&&(b.style.backgroundImage=`url('${p}')`,v?b.classList.add("is-active"):requestAnimationFrame(()=>b.classList.add("is-active"))),g=!g,r&&r.querySelectorAll(".hero-dot").forEach((E,S)=>{E.classList.toggle("hero-dot--active",S===f)})},l=f=>{c=(f+n.length)%n.length,h(c)};r&&(r.innerHTML="",n.forEach((f,v)=>{let p=document.createElement("button");p.className="hero-dot"+(v===0?" hero-dot--active":""),p.type="button",p.setAttribute("aria-label",`Go to slide ${v+1}`),p.addEventListener("click",()=>l(v)),r.appendChild(p)})),h(0,!0),u instanceof Element&&u.addEventListener("click",()=>l(c-1)),e instanceof Element&&e.addEventListener("click",()=>l(c+1));let o=(f,v,p)=>f&&typeof f.addEventListener=="function"&&f.addEventListener(v,p),t=setInterval(()=>l(c+1),6e3),m=()=>{t&&(clearInterval(t),t=null)},d=()=>{t||(t=setInterval(()=>l(c+1),6e3))};o(i,"mouseenter",m),o(i,"mouseleave",d),o(document,"visibilitychange",()=>document.hidden?m():d())})}catch(s){console.error("[hero] init failed:",s)}document.addEventListener("DOMContentLoaded",()=>{try{let s=document.querySelector("[data-testimony]");if(!s)return;let i=s.querySelector('[data-role="front"]'),n=s.querySelector('[data-role="back"]'),r=s.querySelector("[data-next], .testimony-next")||document.querySelector("[data-next], .testimony-next"),u=s.querySelector("[data-testimony-source]"),e=[];if(u){try{let o=JSON.parse(u.textContent||"[]");Array.isArray(o)&&(e=o.map(t=>({heading:typeof t?.title=="string"?t.title:"",body:typeof t?.body=="string"?t.body:"",author:typeof t?.author=="string"?t.author:""})).filter(t=>t.heading||t.body||t.author))}catch(o){console.error("[testimony] failed to parse data:",o)}typeof u.remove=="function"&&u.remove()}if(!e.length)return;let a=0,y=!1,c=o=>{if(!o)return"";let t=String(o).split("/"),m=(t.shift()||"").trim(),d=t.join("/").trim();return d?`${m} <span style="color:#94A3B8;font-weight:700;">/ ${d}</span>`:m},g=(o,t)=>{let m=o.querySelector(".testimony-heading"),d=o.querySelector(".testimony-body"),f=o.querySelector(".testimony-author");m&&(m.textContent=t.heading||""),d&&(d.textContent=t.body||""),f&&(f.innerHTML=c(t.author))};g(i,e[a]),g(n,e[(a+1)%e.length]),r&&i!==r.parentElement&&i.prepend(r);let h=()=>{if(y)return;y=!0,s.classList.add("is-animating"),n.classList.remove("is-back"),n.classList.add("is-front"),i.classList.remove("is-front"),i.classList.add("is-back");let o=t=>{if(t&&t.propertyName!=="transform")return;n.removeEventListener("transitionend",o);let m=i;i=n,n=m,a=(a+1)%e.length,g(n,e[(a+1)%e.length]),r&&i!==r.parentElement&&i.prepend(r),y=!1,s.classList.remove("is-animating")};n.addEventListener("transitionend",o)},l=e.length>1;r&&typeof r.addEventListener=="function"&&(l?r.addEventListener("click",h):r.setAttribute("disabled","true")),l&&s.addEventListener("click",o=>{(o.target&&typeof o.target.closest=="function"?o.target.closest("[data-next], .testimony-next"):null)&&h()})}catch(s){console.error("[testimony] init failed:",s)}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(s=>{s.addEventListener("click",i=>{let n=s.getAttribute("href"),r=document.querySelector(n);r&&(i.preventDefault(),r.scrollIntoView({behavior:"smooth"}))})})});document.addEventListener("DOMContentLoaded",()=>{try{let s=document.querySelector("#news[data-news-slider]");if(!s)return;let i=s.querySelector(".news-viewport"),n=s.querySelector(".news-track"),r=Array.from(n.querySelectorAll(".news-card")),u=s.querySelector(".news-prev"),e=s.querySelector(".news-next");if(r.length===0){u&&u.setAttribute("disabled","true"),e&&e.setAttribute("disabled","true");return}let a=0,y=0,c=0,g=d=>parseFloat(String(d).replace("px",""))||0,h=()=>{let d=getComputedStyle(i),f=Math.max(1,parseInt(d.getPropertyValue("--cards-per-view"))||3),v=g(d.getPropertyValue("--gap"));y=(i.getBoundingClientRect().width-(f-1)*v)/f+v,c=Math.max(0,r.length-f),a=Math.min(a,c),l(),o()},l=()=>{n.style.setProperty("--news-offset",`${-(a*y)}px`)},o=()=>{u&&(a<=0?u.setAttribute("disabled","true"):u.removeAttribute("disabled")),e&&(a>=c?e.setAttribute("disabled","true"):e.removeAttribute("disabled"))},t=()=>{a>0&&(a--,l(),o())},m=()=>{a<c&&(a++,l(),o())};u&&u.addEventListener("click",t),e&&e.addEventListener("click",m),window.addEventListener("resize",h),h()}catch(s){console.error("[news slider] init failed:",s)}});})();
