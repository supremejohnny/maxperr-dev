(()=>{document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector(".site-header"),i=t?.classList.contains("site-header--subpage");function l(){if(!t||i){t?.classList.remove("tablet-corner");return}let e=window.innerWidth;e>=768&&e<=1023?(t.classList.add("tablet-corner"),console.log("Tablet mode: Header moved to corner")):(t.classList.remove("tablet-corner"),console.log("Non-tablet mode: Header in normal position"))}i?t?.classList.remove("tablet-corner"):(l(),window.addEventListener("resize",l));let s=document.getElementById("mobile-menu-button"),a=document.getElementById("mobile-menu");s&&a&&(s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let u=s.getAttribute("aria-expanded")==="true";s.setAttribute("aria-expanded",!u),a.classList.toggle("show"),console.log("Mobile menu toggled:",!u)}),a.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",()=>{s.setAttribute("aria-expanded","false"),a.classList.remove("show")})}),document.addEventListener("click",e=>{!s.contains(e.target)&&!a.contains(e.target)&&(s.setAttribute("aria-expanded","false"),a.classList.remove("show"))})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",u=>{let d=e.getAttribute("href"),n=document.querySelector(d);n&&(u.preventDefault(),n.scrollIntoView({behavior:"smooth"}))})});let c=document.querySelectorAll(".nav-dropdown"),r=null,b=()=>typeof window<"u"&&("ontouchstart"in window||navigator&&(navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0));c.forEach(e=>{let u=e.querySelector("[data-dropdown]"),d=e.querySelector(".dropdown-menu");!u||!d||(e.addEventListener("mouseenter",()=>{r&&r!==e&&r.classList.remove("is-active"),e.classList.add("is-active"),r=e}),e.addEventListener("mouseleave",()=>{e.classList.remove("is-active"),r===e&&(r=null)}),u.addEventListener("click",n=>{b()&&(n.preventDefault(),e.classList.contains("is-active")?(e.classList.remove("is-active"),r=null):(c.forEach(o=>{o!==e&&o.classList.remove("is-active")}),e.classList.add("is-active"),r=e))}),document.addEventListener("click",n=>{e.contains(n.target)||(e.classList.remove("is-active"),r===e&&(r=null))}))}),document.addEventListener("keydown",e=>{e.key==="Escape"&&r&&(r.classList.remove("is-active"),r=null)}),document.querySelectorAll("[data-accordion-group]").forEach(e=>{let u=Array.from(e.querySelectorAll("[data-accordion-item]"));u.forEach(d=>{let n=d.querySelector("[data-accordion-trigger]"),o=d.querySelector("[data-accordion-panel]");!n||!o||n.addEventListener("click",()=>{let v=n.getAttribute("aria-expanded")==="true";u.forEach(f=>{let m=f.querySelector("[data-accordion-trigger]"),h=f.querySelector("[data-accordion-panel]"),g=f.querySelector("[data-accordion-icon]");if(!m||!h)return;let p=f===d?!v:!1;m.setAttribute("aria-expanded",p?"true":"false"),p?h.removeAttribute("hidden"):h.setAttribute("hidden",""),f.classList.toggle("is-open",p),g&&g.classList.toggle("rotate-180",p)})})})})});try{document.querySelectorAll(".hero-section").forEach(i=>{if(!(i instanceof Element))return;let l=[];try{l=JSON.parse(i.getAttribute("data-hero-images")||"[]")}catch{l=[]}if(!Array.isArray(l)||l.length===0)return;let s=i.querySelector(".hero-pagination"),a=i.querySelector(".hero-nav--prev"),c=i.querySelector(".hero-nav--next"),r=i.querySelector('.hero-bg-layer[data-layer="a"]'),b=i.querySelector('.hero-bg-layer[data-layer="b"]'),y=0,e=!0,u=(m,h=!1)=>{let g=l[m];if(!g)return;let p=e?r:b,L=e?b:r;L&&L.classList.remove("is-active"),p&&(p.style.backgroundImage=`url('${g}')`,h?p.classList.add("is-active"):requestAnimationFrame(()=>p.classList.add("is-active"))),e=!e,s&&s.querySelectorAll(".hero-dot").forEach((E,S)=>{E.classList.toggle("hero-dot--active",S===m)})},d=m=>{y=(m+l.length)%l.length,u(y)};s&&(s.innerHTML="",l.forEach((m,h)=>{let g=document.createElement("button");g.className="hero-dot"+(h===0?" hero-dot--active":""),g.type="button",g.setAttribute("aria-label",`Go to slide ${h+1}`),g.addEventListener("click",()=>d(h)),s.appendChild(g)})),u(0,!0),a instanceof Element&&a.addEventListener("click",()=>d(y-1)),c instanceof Element&&c.addEventListener("click",()=>d(y+1));let n=(m,h,g)=>m&&typeof m.addEventListener=="function"&&m.addEventListener(h,g),o=setInterval(()=>d(y+1),6e3),v=()=>{o&&(clearInterval(o),o=null)},f=()=>{o||(o=setInterval(()=>d(y+1),6e3))};n(i,"mouseenter",v),n(i,"mouseleave",f),n(document,"visibilitychange",()=>document.hidden?v():f())})}catch(t){console.error("[hero] init failed:",t)}document.addEventListener("DOMContentLoaded",()=>{try{let t=document.querySelector("[data-testimony]");if(!t)return;let i=t.querySelector('[data-role="front"]'),l=t.querySelector('[data-role="back"]'),s=t.querySelector("[data-next], .testimony-next")||document.querySelector("[data-next], .testimony-next"),a=t.querySelector("[data-testimony-source]"),c=[];if(a){try{let n=JSON.parse(a.textContent||"[]");Array.isArray(n)&&(c=n.map(o=>({heading:typeof o?.title=="string"?o.title:"",body:typeof o?.body=="string"?o.body:"",author:typeof o?.author=="string"?o.author:""})).filter(o=>o.heading||o.body||o.author))}catch(n){console.error("[testimony] failed to parse data:",n)}typeof a.remove=="function"&&a.remove()}if(!c.length)return;let r=0,b=!1,y=n=>{if(!n)return"";let o=String(n).split("/"),v=(o.shift()||"").trim(),f=o.join("/").trim();return f?`${v} <span style="color:#94A3B8;font-weight:700;">/ ${f}</span>`:v},e=(n,o)=>{let v=n.querySelector(".testimony-heading"),f=n.querySelector(".testimony-body"),m=n.querySelector(".testimony-author");v&&(v.textContent=o.heading||""),f&&(f.textContent=o.body||""),m&&(m.innerHTML=y(o.author))};e(i,c[r]),e(l,c[(r+1)%c.length]),s&&i!==s.parentElement&&i.prepend(s);let u=()=>{if(b)return;b=!0,t.classList.add("is-animating"),l.classList.remove("is-back"),l.classList.add("is-front"),i.classList.remove("is-front"),i.classList.add("is-back");let n=o=>{if(o&&o.propertyName!=="transform")return;l.removeEventListener("transitionend",n);let v=i;i=l,l=v,r=(r+1)%c.length,e(l,c[(r+1)%c.length]),s&&i!==s.parentElement&&i.prepend(s),b=!1,t.classList.remove("is-animating")};l.addEventListener("transitionend",n)},d=c.length>1;s&&typeof s.addEventListener=="function"&&(d?s.addEventListener("click",u):s.setAttribute("disabled","true")),d&&t.addEventListener("click",n=>{(n.target&&typeof n.target.closest=="function"?n.target.closest("[data-next], .testimony-next"):null)&&u()})}catch(t){console.error("[testimony] init failed:",t)}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",i=>{let l=t.getAttribute("href"),s=document.querySelector(l);s&&(i.preventDefault(),s.scrollIntoView({behavior:"smooth"}))})})});document.addEventListener("DOMContentLoaded",()=>{try{let t=document.querySelector("#news[data-news-slider]");if(!t)return;let i=t.querySelector(".news-viewport"),l=t.querySelector(".news-track"),s=Array.from(l.querySelectorAll(".news-card")),a=t.querySelector(".news-prev"),c=t.querySelector(".news-next");if(s.length===0){a&&a.setAttribute("disabled","true"),c&&c.setAttribute("disabled","true");return}let r=0,b=0,y=0,e=f=>parseFloat(String(f).replace("px",""))||0,u=()=>{let f=getComputedStyle(i),m=Math.max(1,parseInt(f.getPropertyValue("--cards-per-view"))||3),h=e(f.getPropertyValue("--gap"));b=(i.getBoundingClientRect().width-(m-1)*h)/m+h,y=Math.max(0,s.length-m),r=Math.min(r,y),d(),n()},d=()=>{l.style.setProperty("--news-offset",`${-(r*b)}px`)},n=()=>{a&&(r<=0?a.setAttribute("disabled","true"):a.removeAttribute("disabled")),c&&(r>=y?c.setAttribute("disabled","true"):c.removeAttribute("disabled"))},o=()=>{r>0&&(r--,d(),n())},v=()=>{r<y&&(r++,d(),n())};a&&a.addEventListener("click",o),c&&c.addEventListener("click",v),window.addEventListener("resize",u),u()}catch(t){console.error("[news slider] init failed:",t)}});document.addEventListener("DOMContentLoaded",()=>{try{document.querySelectorAll("[data-news-grid]").forEach(t=>{let i=parseInt(t.getAttribute("data-visible-count")||"",10)||0,s=Array.from(t.querySelectorAll("[data-news-card]")).filter((c,r)=>i&&r>=i),a=t.querySelector("[data-news-load-more]");if(a){if(s.length===0){a.setAttribute("hidden","hidden");return}a.addEventListener("click",()=>{s.forEach(c=>{c.removeAttribute("hidden"),c.removeAttribute("data-news-hidden")}),a.setAttribute("hidden","hidden")})}})}catch(t){console.error("[news grid] init failed:",t)}});})();
