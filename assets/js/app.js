(()=>{document.addEventListener("DOMContentLoaded",()=>{let r=document.querySelector(".site-header"),s=r?.classList.contains("site-header--subpage");function i(){if(!r||s){r?.classList.remove("tablet-corner");return}let e=window.innerWidth;e>=768&&e<=1023?(r.classList.add("tablet-corner"),console.log("Tablet mode: Header moved to corner")):(r.classList.remove("tablet-corner"),console.log("Non-tablet mode: Header in normal position"))}s?r?.classList.remove("tablet-corner"):(i(),window.addEventListener("resize",i));let o=document.getElementById("mobile-menu-button"),a=document.getElementById("mobile-menu");o&&a&&(o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();let u=o.getAttribute("aria-expanded")==="true";o.setAttribute("aria-expanded",!u),a.classList.toggle("show"),console.log("Mobile menu toggled:",!u)}),a.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",()=>{o.setAttribute("aria-expanded","false"),a.classList.remove("show")})}),document.addEventListener("click",e=>{!o.contains(e.target)&&!a.contains(e.target)&&(o.setAttribute("aria-expanded","false"),a.classList.remove("show"))})),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",u=>{let d=e.getAttribute("href"),f=document.querySelector(d);f&&(u.preventDefault(),f.scrollIntoView({behavior:"smooth"}))})}),document.querySelectorAll("[data-accordion-group]").forEach(e=>{let u=Array.from(e.querySelectorAll("[data-accordion-item]"));u.forEach(d=>{let f=d.querySelector("[data-accordion-trigger]"),h=d.querySelector("[data-accordion-panel]");!f||!h||f.addEventListener("click",()=>{let g=f.getAttribute("aria-expanded")==="true";u.forEach(t=>{let n=t.querySelector("[data-accordion-trigger]"),y=t.querySelector("[data-accordion-panel]"),m=t.querySelector("[data-accordion-icon]");if(!n||!y)return;let l=t===d?!g:!1;n.setAttribute("aria-expanded",l?"true":"false"),l?y.removeAttribute("hidden"):y.setAttribute("hidden",""),t.classList.toggle("is-open",l),m&&m.classList.toggle("rotate-180",l)})})})})});try{document.querySelectorAll(".hero-section").forEach(s=>{if(!(s instanceof Element))return;let i=[];try{i=JSON.parse(s.getAttribute("data-hero-images")||"[]")}catch{i=[]}if(!Array.isArray(i)||i.length===0)return;let o=s.querySelector(".hero-pagination"),a=s.querySelector(".hero-nav--prev"),c=s.querySelector(".hero-nav--next"),e=s.querySelector('.hero-bg-layer[data-layer="a"]'),u=s.querySelector('.hero-bg-layer[data-layer="b"]'),d=0,f=!0,h=(l,b=!1)=>{let p=i[l];if(!p)return;let v=f?e:u,L=f?u:e;L&&L.classList.remove("is-active"),v&&(v.style.backgroundImage=`url('${p}')`,b?v.classList.add("is-active"):requestAnimationFrame(()=>v.classList.add("is-active"))),f=!f,o&&o.querySelectorAll(".hero-dot").forEach((E,S)=>{E.classList.toggle("hero-dot--active",S===l)})},g=l=>{d=(l+i.length)%i.length,h(d)};o&&(o.innerHTML="",i.forEach((l,b)=>{let p=document.createElement("button");p.className="hero-dot"+(b===0?" hero-dot--active":""),p.type="button",p.setAttribute("aria-label",`Go to slide ${b+1}`),p.addEventListener("click",()=>g(b)),o.appendChild(p)})),h(0,!0),a instanceof Element&&a.addEventListener("click",()=>g(d-1)),c instanceof Element&&c.addEventListener("click",()=>g(d+1));let t=(l,b,p)=>l&&typeof l.addEventListener=="function"&&l.addEventListener(b,p),n=setInterval(()=>g(d+1),6e3),y=()=>{n&&(clearInterval(n),n=null)},m=()=>{n||(n=setInterval(()=>g(d+1),6e3))};t(s,"mouseenter",y),t(s,"mouseleave",m),t(document,"visibilitychange",()=>document.hidden?y():m())})}catch(r){console.error("[hero] init failed:",r)}document.addEventListener("DOMContentLoaded",()=>{try{let r=document.querySelector("[data-testimony]");if(!r)return;let s=r.querySelector('[data-role="front"]'),i=r.querySelector('[data-role="back"]'),o=r.querySelector("[data-next], .testimony-next")||document.querySelector("[data-next], .testimony-next"),a=r.querySelector("[data-testimony-source]"),c=[];if(a){try{let t=JSON.parse(a.textContent||"[]");Array.isArray(t)&&(c=t.map(n=>({heading:typeof n?.title=="string"?n.title:"",body:typeof n?.body=="string"?n.body:"",author:typeof n?.author=="string"?n.author:""})).filter(n=>n.heading||n.body||n.author))}catch(t){console.error("[testimony] failed to parse data:",t)}typeof a.remove=="function"&&a.remove()}if(!c.length)return;let e=0,u=!1,d=t=>{if(!t)return"";let n=String(t).split("/"),y=(n.shift()||"").trim(),m=n.join("/").trim();return m?`${y} <span style="color:#94A3B8;font-weight:700;">/ ${m}</span>`:y},f=(t,n)=>{let y=t.querySelector(".testimony-heading"),m=t.querySelector(".testimony-body"),l=t.querySelector(".testimony-author");y&&(y.textContent=n.heading||""),m&&(m.textContent=n.body||""),l&&(l.innerHTML=d(n.author))};f(s,c[e]),f(i,c[(e+1)%c.length]),o&&s!==o.parentElement&&s.prepend(o);let h=()=>{if(u)return;u=!0,r.classList.add("is-animating"),i.classList.remove("is-back"),i.classList.add("is-front"),s.classList.remove("is-front"),s.classList.add("is-back");let t=n=>{if(n&&n.propertyName!=="transform")return;i.removeEventListener("transitionend",t);let y=s;s=i,i=y,e=(e+1)%c.length,f(i,c[(e+1)%c.length]),o&&s!==o.parentElement&&s.prepend(o),u=!1,r.classList.remove("is-animating")};i.addEventListener("transitionend",t)},g=c.length>1;o&&typeof o.addEventListener=="function"&&(g?o.addEventListener("click",h):o.setAttribute("disabled","true")),g&&r.addEventListener("click",t=>{(t.target&&typeof t.target.closest=="function"?t.target.closest("[data-next], .testimony-next"):null)&&h()})}catch(r){console.error("[testimony] init failed:",r)}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(r=>{r.addEventListener("click",s=>{let i=r.getAttribute("href"),o=document.querySelector(i);o&&(s.preventDefault(),o.scrollIntoView({behavior:"smooth"}))})})});document.addEventListener("DOMContentLoaded",()=>{try{let r=document.querySelector("#news[data-news-slider]");if(!r)return;let s=r.querySelector(".news-viewport"),i=r.querySelector(".news-track"),o=Array.from(i.querySelectorAll(".news-card")),a=r.querySelector(".news-prev"),c=r.querySelector(".news-next");if(o.length===0){a&&a.setAttribute("disabled","true"),c&&c.setAttribute("disabled","true");return}let e=0,u=0,d=0,f=m=>parseFloat(String(m).replace("px",""))||0,h=()=>{let m=getComputedStyle(s),l=Math.max(1,parseInt(m.getPropertyValue("--cards-per-view"))||3),b=f(m.getPropertyValue("--gap"));u=(s.getBoundingClientRect().width-(l-1)*b)/l+b,d=Math.max(0,o.length-l),e=Math.min(e,d),g(),t()},g=()=>{i.style.setProperty("--news-offset",`${-(e*u)}px`)},t=()=>{a&&(e<=0?a.setAttribute("disabled","true"):a.removeAttribute("disabled")),c&&(e>=d?c.setAttribute("disabled","true"):c.removeAttribute("disabled"))},n=()=>{e>0&&(e--,g(),t())},y=()=>{e<d&&(e++,g(),t())};a&&a.addEventListener("click",n),c&&c.addEventListener("click",y),window.addEventListener("resize",h),h()}catch(r){console.error("[news slider] init failed:",r)}});})();
