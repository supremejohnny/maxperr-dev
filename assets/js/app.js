(()=>{document.addEventListener("DOMContentLoaded",()=>{let o=document.querySelector(".site-header");function s(){if(o){let n=window.innerWidth;n>=768&&n<=1023?(o.classList.add("tablet-corner"),console.log("Tablet mode: Header moved to corner")):(o.classList.remove("tablet-corner"),console.log("Non-tablet mode: Header in normal position"))}}s(),window.addEventListener("resize",s);let e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu");e&&t&&(e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();let a=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",!a),t.classList.toggle("show"),console.log("Mobile menu toggled:",!a)}),t.querySelectorAll(".nav-link").forEach(n=>{n.addEventListener("click",()=>{e.setAttribute("aria-expanded","false"),t.classList.remove("show")})}),document.addEventListener("click",n=>{!e.contains(n.target)&&!t.contains(n.target)&&(e.setAttribute("aria-expanded","false"),t.classList.remove("show"))})),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",a=>{let c=n.getAttribute("href"),f=document.querySelector(c);f&&(a.preventDefault(),f.scrollIntoView({behavior:"smooth"}))})})});try{document.querySelectorAll(".hero-section").forEach(s=>{if(!(s instanceof Element))return;let e=[];try{e=JSON.parse(s.getAttribute("data-hero-images")||"[]")}catch{e=[]}if(!Array.isArray(e)||e.length===0)return;let t=s.querySelector(".hero-pagination"),n=s.querySelector(".hero-nav--prev"),a=s.querySelector(".hero-nav--next"),c=s.querySelector('.hero-bg-layer[data-layer="a"]'),f=s.querySelector('.hero-bg-layer[data-layer="b"]'),d=0,p=!0,v=(l,g=!1)=>{let h=e[l];if(!h)return;let b=p?c:f,L=p?f:c;L&&L.classList.remove("is-active"),b&&(b.style.backgroundImage=`url('${h}')`,g?b.classList.add("is-active"):requestAnimationFrame(()=>b.classList.add("is-active"))),p=!p,t&&t.querySelectorAll(".hero-dot").forEach((E,S)=>{E.classList.toggle("hero-dot--active",S===l)})},m=l=>{d=(l+e.length)%e.length,v(d)};t&&(t.innerHTML="",e.forEach((l,g)=>{let h=document.createElement("button");h.className="hero-dot"+(g===0?" hero-dot--active":""),h.type="button",h.setAttribute("aria-label",`Go to slide ${g+1}`),h.addEventListener("click",()=>m(g)),t.appendChild(h)})),v(0,!0),n instanceof Element&&n.addEventListener("click",()=>m(d-1)),a instanceof Element&&a.addEventListener("click",()=>m(d+1));let i=(l,g,h)=>l&&typeof l.addEventListener=="function"&&l.addEventListener(g,h),r=setInterval(()=>m(d+1),6e3),y=()=>{r&&(clearInterval(r),r=null)},u=()=>{r||(r=setInterval(()=>m(d+1),6e3))};i(s,"mouseenter",y),i(s,"mouseleave",u),i(document,"visibilitychange",()=>document.hidden?y():u())})}catch(o){console.error("[hero] init failed:",o)}document.addEventListener("DOMContentLoaded",()=>{try{let o=document.querySelector("[data-testimony]");if(!o)return;let s=o.querySelector('[data-role="front"]'),e=o.querySelector('[data-role="back"]'),t=o.querySelector("[data-next], .testimony-next")||document.querySelector("[data-next], .testimony-next"),n=o.querySelector("[data-testimony-source]"),a=[];if(n){try{let i=JSON.parse(n.textContent||"[]");Array.isArray(i)&&(a=i.map(r=>({heading:typeof r?.title=="string"?r.title:"",body:typeof r?.body=="string"?r.body:"",author:typeof r?.author=="string"?r.author:""})).filter(r=>r.heading||r.body||r.author))}catch(i){console.error("[testimony] failed to parse data:",i)}typeof n.remove=="function"&&n.remove()}if(!a.length)return;let c=0,f=!1,d=i=>{if(!i)return"";let r=String(i).split("/"),y=(r.shift()||"").trim(),u=r.join("/").trim();return u?`${y} <span style="color:#94A3B8;font-weight:700;">/ ${u}</span>`:y},p=(i,r)=>{let y=i.querySelector(".testimony-heading"),u=i.querySelector(".testimony-body"),l=i.querySelector(".testimony-author");y&&(y.textContent=r.heading||""),u&&(u.textContent=r.body||""),l&&(l.innerHTML=d(r.author))};p(s,a[c]),p(e,a[(c+1)%a.length]),t&&s!==t.parentElement&&s.prepend(t);let v=()=>{if(f)return;f=!0,o.classList.add("is-animating"),e.classList.remove("is-back"),e.classList.add("is-front"),s.classList.remove("is-front"),s.classList.add("is-back");let i=r=>{if(r&&r.propertyName!=="transform")return;e.removeEventListener("transitionend",i);let y=s;s=e,e=y,c=(c+1)%a.length,p(e,a[(c+1)%a.length]),t&&s!==t.parentElement&&s.prepend(t),f=!1,o.classList.remove("is-animating")};e.addEventListener("transitionend",i)},m=a.length>1;t&&typeof t.addEventListener=="function"&&(m?t.addEventListener("click",v):t.setAttribute("disabled","true")),m&&o.addEventListener("click",i=>{(i.target&&typeof i.target.closest=="function"?i.target.closest("[data-next], .testimony-next"):null)&&v()})}catch(o){console.error("[testimony] init failed:",o)}});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",s=>{let e=o.getAttribute("href"),t=document.querySelector(e);t&&(s.preventDefault(),t.scrollIntoView({behavior:"smooth"}))})})});document.addEventListener("DOMContentLoaded",()=>{try{let o=document.querySelector("#news[data-news-slider]");if(!o)return;let s=o.querySelector(".news-viewport"),e=o.querySelector(".news-track"),t=Array.from(e.querySelectorAll(".news-card")),n=o.querySelector(".news-prev"),a=o.querySelector(".news-next");if(t.length===0){n&&n.setAttribute("disabled","true"),a&&a.setAttribute("disabled","true");return}let c=0,f=0,d=0,p=u=>parseFloat(String(u).replace("px",""))||0,v=()=>{let u=getComputedStyle(s),l=Math.max(1,parseInt(u.getPropertyValue("--cards-per-view"))||3),g=p(u.getPropertyValue("--gap"));f=(s.getBoundingClientRect().width-(l-1)*g)/l+g,d=Math.max(0,t.length-l),c=Math.min(c,d),m(),i()},m=()=>{e.style.setProperty("--news-offset",`${-(c*f)}px`)},i=()=>{n&&(c<=0?n.setAttribute("disabled","true"):n.removeAttribute("disabled")),a&&(c>=d?a.setAttribute("disabled","true"):a.removeAttribute("disabled"))},r=()=>{c>0&&(c--,m(),i())},y=()=>{c<d&&(c++,m(),i())};n&&n.addEventListener("click",r),a&&a.addEventListener("click",y),window.addEventListener("resize",v),v()}catch(o){console.error("[news slider] init failed:",o)}});})();
